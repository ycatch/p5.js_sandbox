<!DOCTYPE html>
<html>
<head>
	<!-- META -->
	<title>Instance mode demo - sandbox for p5.js</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="description" content="Example of turtle graphics for p5.js." />
	<style>body {padding: 10; margin: 10;} </style>
</head>

<body>
	<h1>p5.js - sandbox - Instance mode</h1>
	<div id = "p5Canvas"></div>
	<div>
		<p>sandbox for p5.js verson 0.5.3. This example runs at the instance mode.</p>
		<p>notice: all commands and constants need "p."</p>
	</div>
	<input type="button" onclick="run()" value="RUN">
	<input type="button" onclick="stop()" value="STOP">
	<br>
<textarea id="editor" rows=10 cols=80 name="code">
p.setup = function() {
	p.createCanvas(p.windowWidth - 20, 240);
	p.background(200);
};
p.draw = function() {
	p.fill(255);
	p.ellipse(p.mouseX, p.mouseY, 50, 50);
};</textarea>
	<ul>
		<li><a href='http://p5js.org/' target='_blank'>p5.js</a></li>
		<li><a href='http://www.catch.jp/wiki/?p5.js' target='_blank'>p5.js - catch.jp-wiki</a></li>
	</ul>
	<hr />
	<p>Copyright 2015-2016 Yutaka Kachi</p>
	<p>This HTML and code released under the <a href="http://sourceforge.jp/projects/opensource/wiki/licenses%2FMIT_license">MIT License</a>.</p>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/p5.min.js"></script>
	<script>
	var Pjs;
	run();

	function stop() {
		if (Pjs) {
			Pjs.remove();
		}
	}

	function run(){
		//console.log("Run");
		if (Pjs) {
			Pjs.remove();
			Pjs.noCanvas();
		}

		try {
			var s = new Function("p", document.getElementsByName('code')[0].value);
			Pjs = new p5(s, "p5Canvas");
			//console.log(Pjs);
		} catch(e) {
			alert(e);
		}
	}
	</script>
</body>

</html>
